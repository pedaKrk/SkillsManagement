<div class="user-details-page">
  <!-- Loading-Indikator -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <span>{{ 'PROFILE.LOADING' | translate }}</span>
  </div>

  <!-- Error message -->
  <div *ngIf="error" class="error-container">
    <div class="error-message">{{ error }}</div>
    <div class="error-actions">
      <button class="btn btn-primary" (click)="loadUserDetails()">{{ 'PROFILE.RETRY' | translate }}</button>
      <button class="btn btn-secondary" (click)="goBack()">{{ 'PROFILE.BACK_TO_LIST' | translate }}</button>
    </div>
  </div>

  <!-- User details -->
  <div *ngIf="user && !isLoading && !error" class="user-details-container">
    <!-- Header with profile image and main information -->
    <app-user-details-header
      [user]="user"
      [isAdmin]="isAdmin"
      [isOwnProfile]="isOwnProfile()"
      [showInitialsOnError]="showInitialsOnError"
      (editUser)="editUser()"
      (sendEmail)="sendEmail()"
      (imageError)="onImageError()"
    ></app-user-details-header>

    <!-- Detail information -->
    <div class="user-details-sections">
      <!-- Contact information -->
      <div class="details-section">
        <h2 class="section-title">{{ 'PROFILE.CONTACT_INFO' | translate }}</h2>
        <div class="info-row">
          <span class="info-label">{{ 'PROFILE.EMAIL' | translate }}</span>
          <span class="info-value">{{ user.email }}</span>
        </div>
        <div class="info-row" *ngIf="user.phoneNumber">
          <span class="info-label">{{ 'PROFILE.PHONE_NUMBER' | translate }}</span>
          <span class="info-value">{{ user.phoneNumber }}</span>
        </div>
      </div>

      <!-- Skills -->
      <app-user-skills-display
        [userSkills]="user.skills"
      ></app-user-skills-display>
    </div>

    <app-user-statistics [user]="user"></app-user-statistics>

    <!-- Comments -->
    <app-user-comments-section
      [userId]="userId"
      [canAddComments]="canAddComments"
      [isAdmin]="isAdmin"
    ></app-user-comments-section>
  </div>
</div>
